<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bulma@0.9.4/css/bulma.min.css">
    <link rel="stylesheet" href="style.css">

    <style>

      #scrolly {
        position: relative;
        padding: 1rem;
      }

      .scrolly-overlay {
        position: relative;
        padding: 0;
        max-width: 35rem;
        margin: 0 auto;
      }

      .sticky-thing {
        position: -webkit-sticky;
        position: sticky;
        left: 0;
        width: 100%;
        margin: 0;
        z-index: 0;
        top: 0;
        height: 100vh;
        /* Center everything inside */
        display: flex;
        justify-content: center;
        flex-direction: column;
        justify-content: center;
      }

      .step {
        margin: 0 auto 2rem auto;
        margin-bottom: 25rem;
        background-color: #eee;
        background-color: #fff;
        color: black;
      }

      .step p {
        text-align: center;
        padding: 1rem;
        font-size: 1.25rem;
      }

      .hidden { visibility: hidden; }

      /* When it's less than 700 pixels wide, do normal scrollytelling */
      @media only screen and (min-width: 700px) {
        #scrolly.side-by-side {
          display: flex;
        }

        #scrolly.side-by-side > div {
          flex-basis: 0;
          flex-grow: 1;
          flex-shrink: 1;
          padding: 0.75em;
        }

        #scrolly.side-by-side .scrolly-overlay {
          margin-top: 70vh;
          order: 0;
          /* Change these to adjust sizing options */
          min-width: 15rem;
          max-width: 20rem;
        }

        #scrolly.side-by-side .sticky-thing {
          order: 1;
          flex-grow: 2;
        }

        #grid-chart-one {
          width: 20px !important;

        }

      }
    </style>
	<script src="https://unpkg.com/intersection-observer@0.5.1/intersection-observer.js"></script>
	<script src="https://cdnjs.cloudflare.com/ajax/libs/scrollama/3.0.4/scrollama.min.js"></script>
	<script src="https://cdnjs.cloudflare.com/ajax/libs/d3/7.3.0/d3.min.js"></script>
  </head>

  <body>
    <section class="section">
        <div class="title has-text-centered">	
            The largest auto recall in U.S. history 
        </div>
        <br>
        <div class="has-text-centered">
            Defective airbags made by Takata have been linked to at least 21 deaths and more than 400 injuries in the U.S. As many as 55 million vehicles are affected, according to the NHTSA. 

            Let’s walk through the history of the biggest auto recall in U.S. history — one that’s still ongoing.
            </div>
    </section>
      <section id="scrolly">
        <div class="sticky-thing">
            <div class="ai2html-container">

<!-- ai2html goes below this line -->


<!-- Generated by ai2html v0.111.0 - 2022-07-24 13:52 -->
<!-- ai file: carsstep1.ai -->
<style media="screen,print">
	#g-carsstep1-box ,
	#g-carsstep1-box .g-artboard {
		margin:0 auto;
	}
	#g-carsstep1-box p {
		margin:0;
	}
	#g-carsstep1-box .g-aiAbs {
		position:absolute;
	}
	#g-carsstep1-box .g-aiImg {
		position:absolute;
		top:0;
		display:block;
		width:100% !important;
	}
	#g-carsstep1-box .g-aiSymbol {
		position: absolute;
		box-sizing: border-box;
	}
	#g-carsstep1-box .g-aiPointText p { white-space: nowrap; }
	#g-carsstep1-Artboard_1 {
		position:relative;
		overflow:hidden;
	}

</style>

<div id="g-carsstep1-box" class="ai2html">

	<!-- Artboard: Artboard_1 -->
	<div id="g-carsstep1-Artboard_1" class="g-artboard" style="max-width: 900px;max-height: 500px" data-aspect-ratio="1.8"data-min-width="0">
<div style="padding: 0 0 55.5556% 0;"></div>
		<img id="g-carsstep1-Artboard_1-img" class="g-carsstep1-Artboard_1-img g-aiImg" alt="" src="carsstep1-Artboard_1.jpg"/>
	</div>

</div>

<!-- End ai2html - 2022-07-24 13:52 -->




<!-- ai2html goes above this line -->

            </div>
        </div>

        <div class="scrolly-overlay">
          <div class="step" id="step-zero">
            <p>In 2009, an eighteen-year-old student bled to death after her 2001 Honda Accord bumped another car in the school parking lot. The airbag exploded with such force that the metal debris sliced open her carotid artery.</p>
          </div>
          <div class="step">
            <p>At the time, only about 4,000 vehicles had been recalled. This was the first time Honda publicly acknowledged the issue, but failed to disclose that it knew about prior injuries caused by the malfunctioning airbags. 
            </p>          
          </div>
          <div id='grid-container-zero'>
            <div id='grid-chart-zero'>
            </div>
          <div class="step" id="step-one">
            <p>Honda soon expanded that recall to 440,000 cars. Six months after Parham’s death, another airbag ruptured, killing 33-year-old Gurjit Rathore. Both cases were settled privately.</p>
            <p>The NHTSA opened an inquiry into Honda and Takata, but closed the probe just six months later.</p>
          <div id='grid-container-one'>
            <div id='grid-chart-one' ></div>
          </div>
          </div>
          <div class="step" id="step-two">
            <p>More than a decade later, 67 million airbags from at least 42 million vehicles in the U.S. have been recalled.</p>
          </div>
          <div class="step" id="step-three">
            <p>Now you're at the final step and everything has been reset to the defaults.</p>
            <p>That was fun, though, right?</p>
          </div>
        </div>
      </section>


<!-- Scrollytelling code goes under here -->

    <script>
      
      function hideNote() {
        // hide first graphic
        d3.select("#g-carsstep1-box").classed('hidden', true)
      }
      
        hideNote()

      d3.select("#step-one").on('stepout', function(e) {
        if(e.detail.direction === 'up') {
          // undo the changes from step one if scroll back up
          hideNote()
        }
      })
      d3.select("#step-one").on('stepin', function(e) {
        d3.select('#step-one')
        // do changes for step one
        d3.select("#g-carsstep1-box").classed('hidden', false)
      })

      d3.select("#step-two").on('stepin', function(e) {
        // do changes for step two
        d3.selectAll("[data-name='africa'] path").style('stroke', 'black')
      })

    //   d3.select("#step-three").on('stepin', function(e) {
    //     // undo changes from step two
    //     d3.selectAll("[data-name='africa'] path").style('stroke', 'none')
    //   })

    </script>
  <script>
  function drawGraph0() {
      
      // width and height of the SVG
      const width = 800;
      const height = 100;
  
      //create an svg with width and height
      var svg = d3.select('#grid-chart-zero')
        .append('svg')
        .attr("width", width * 0.8)
        .attr("height", height * 0.8)
        // .style('background-color', svgBackgroundColor);
  
      //10 rows and 10 columns 
      var numRows = 1;
      var numCols = 4;
  
      //x and y axis scales
      var y = d3.scaleBand()
        .domain(d3.range(numRows))
        .range([0,50]);
  
      var x = d3.scaleBand()
        .domain(d3.range(numCols))
        .range([0,100]);
  
      //the data is just an array of numbers for each cell in the grid
      var data = d3.range(numCols*numRows);
  
      //container to hold the grid
      // move it
      var container = svg.append("g")
        .attr("transform", "translate(250,50)");
  
      container.selectAll("circle")
          .data(data)
          .enter().append("circle")
          .attr("id", function(d){return "id"+d;})
          .attr('cx', function(d){return x(d%numCols);})
          .attr('cy', function(d){return y(Math.floor(d/numCols));})
          .attr('r', 5)
  
    }
  
    //call function to draw the graph
    drawGraph0();
  
  </script>
  <script>
      function drawGraph() {

      //number of circles to color in to visualize percent
        // var percentNumber = 92;

        //variables for the font family, and some colors
        var fontFamily = "helvetica";
        var twitterFill = "#4D908E";
        var twitterFillActive = "#adf7b6";
        // var svgBackgroundColor = '#264653';

        // width and height of the SVG
        const width = 1000;
        const height = 1000;

        //create an svg with width and height
        var svg = d3.select('#grid-chart-one')
          .append('svg')
          .attr("width", width)
          .attr("height", height)
          // .style('background-color', svgBackgroundColor);

        //10 rows and 10 columns 
        var numRows = 11;
        var numCols = 40;

        //x and y axis scales
        var y = d3.scaleBand()
          .domain(d3.range(numRows))
          .range([0,height]);

        var x = d3.scaleBand()
          .domain(d3.range(numCols))
          .range([0, width]);

        //the data is just an array of numbers for each cell in the grid
        var data = d3.range(numCols*numRows);

        //container to hold the grid
        // move it
        var container = svg.append("g")
          .attr("transform", "translate(0,50)");

        container.selectAll("circle")
            .data(data)
            .enter().append("circle")
            .attr("id", function(d){return "id"+d;})
            .attr('cx', function(d){return x(d%numCols);})
            .attr('cy', function(d){return y(Math.floor(d/numCols));})
            .attr('r', 5)

      }

      //call function to draw the graph
      drawGraph();

  </script>

<script>
    const scroller = scrollama();

	scroller
		.setup({
			step: "#scrolly .scrolly-overlay .step",
			offset: 0.75,
			debug: false
		})
		.onStepEnter(function({ element, index, direction}) {
			const event = new CustomEvent('stepin', { detail: { direction: direction } })
			element.dispatchEvent(event);
		})
		.onStepExit(function({ element, index, direction }) {
			const event = new CustomEvent('stepout', { detail: { direction: direction } })
			element.dispatchEvent(event);
		});

	window.addEventListener("resize", scroller.resize);
    </script>


    <!-- ai2html resizer script -->

<script type="text/javascript">
  (function() {
      // only want one resizer on the page
      if (document.documentElement.className.indexOf("g-resizer-v3-init") > -1) return;
      document.documentElement.className += " g-resizer-v3-init";
      // require IE9+
      if (!("querySelector" in document)) return;
      function resizer() {
          var elements = Array.prototype.slice.call(document.querySelectorAll(".g-artboard[data-min-width]")),
              widthById = {};
          elements.forEach(function(el) {
              var parent = el.parentNode,
                  width = widthById[parent.id] || parent.getBoundingClientRect().width,
                  minwidth = el.getAttribute("data-min-width"),
                  maxwidth = el.getAttribute("data-max-width");
              widthById[parent.id] = width;

              if (+minwidth <= width && (+maxwidth >= width || maxwidth === null)) {
                  el.style.display = "block";
              } else {
                  el.style.display = "none";
              }
          });
          try {
              if (window.parent && window.parent.$) {
                  window.parent.$("body").trigger("resizedcontent", [window]);
              }
              if (window.require) {
                  require(['foundation/main'], function() {
                      require(['shared/interactive/instances/app-communicator'], function(AppCommunicator) {
                          AppCommunicator.triggerResize();
                      });
                  });
              }
          } catch(e) { console.log(e); }
      }

      document.addEventListener('DOMContentLoaded', resizer);
      // feel free to replace throttle with _.throttle, if available
      window.addEventListener('resize', throttle(resizer, 200));        

      function throttle(func, wait) {
          // from underscore.js
          var _now = Date.now || function() { return new Date().getTime(); },
              context, args, result, timeout = null, previous = 0;
          var later = function() {
              previous = _now();
              timeout = null;
              result = func.apply(context, args);
              if (!timeout) context = args = null;
          };
          return function() {
              var now = _now(), remaining = wait - (now - previous);
              context = this;
              args = arguments;
              if (remaining <= 0 || remaining > wait) {
                  if (timeout) {
                      clearTimeout(timeout);
                      timeout = null;
                  }
                  previous = now;
                  result = func.apply(context, args);
                  if (!timeout) context = args = null;
              } else if (!timeout && options.trailing !== false) {
                  timeout = setTimeout(later, remaining);
              }
              return result;
          };
      }

     
  })();
</script>

  </body>
</html>